{%extends 'base.html'%}
{%block content%}
<div class="pure-g-r content-ribbon">
	<div class="pure-u-1">
		<ul class="breadcrumb">
			<li><a href="{% url 'core:home' %}">Início</a></li>
			<li>/</li>
			<li><a href="{% url 'forum:index' %}">Página de discussões</a></li>
		</ul>
	</div>
	<div class="pure-u-1-3">
		<div class="pure-menu pure-menu-open">
			<ul>
				<li class="pure-menu-heading">Tópicos : </li>
				<li><a href="?order=updated_at"><i class="fas fa-sync"></i> Mais recentes</a></li>
				<li><a href="?order=views"><i class="fas fa-eye"></i> Mais visualizados</a></li>
				<li><a href="?order=answers"><i class="fas fa-comments"></i> Mais comentados</a></li>

				<li class="pure-menu-heading">Tags : </li>
				{% for tag in tags %}
				<li><a href="{% url 'forum:index_tagged' tag.slug%}"><i class="fas fa-tag"> {{tag}}</i></a></li>
				{% endfor %}
			</ul>
		</div>
	</div>
		<div class="pure-u-2-3">
			{% for thread in object_list %}
			<div class="well">
				<h3><a href="{{thread.get_absolute_url}}">{{thread.title}}</a></h3>
				<h5>
					Criado por {{thread.user}} | {{thread.views}} visualizaç{{thread.views|pluralize:"ão,ões"}} |
					{{thread.answers}} resposta{{thread.answers|pluralize}}
				</h5>
				<p>
					<i class="fas fa-tags"></i>
					Tags
					{% for tag in thread.tags.all %}
						<a href="{% url 'forum:index_tagged' tag.slug%}">{{tag}}</a>{% if not forloop.last%},{% endif %}
					{% endfor %}
				</p>
				<a class="fright">Atualizado há {{thread.updated_at|timesince}}</a>
			</div>
			{% empty %}
			<h3>Não há discussões</h3>
			{% endfor %}

			<div class="pagination">
				{% if page_obj.has_previous %}
					<a href="?page={{page_obj.previous_page_number}}{%if request.GET.order%}&order={{request.GET.order}}{%endif%}">&laquo;</a>
				{% endif %}
				{% for page in paginator.page_range%}
				<span class="{% if page == page_obj.number%}active{%endif%}">
					<a href="?page={{page}}{%if request.GET.order%}&order={{request.GET.order}}{%endif%}">{{page}}</a>
				</span>
				{% endfor %}
				{% if page_obj.has_next %}
					<a href="?page={{page_obj.next_page_number}}{%if request.GET.order%}&order={{request.GET.order}}{%endif%}">&raquo;</a>
				{% endif %}
			</ul>
		</div>
</div>
{%endblock%}